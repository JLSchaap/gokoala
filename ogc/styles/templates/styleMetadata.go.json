{{- /*gotype: github.com/PDOK/gokoala/engine.TemplateData*/ -}}
{
  {{ if .Params }}
  {{ $baseUrl := .Config.BaseURL }}
  {{ $style := .Params.Metadata.ID }}
  {{ $projection := .Params.Projection }}
  "id": "{{ $style }}",
  "title": "{{ .Params.Metadata.Title }}",
  "description": "{{ unmarkdown .Params.Metadata.Description }}",
  "keywords": [
    {{ range $kw_index, $keyword := .Params.Metadata.Keywords }}
    {{ if $kw_index }},{{end}}
    "{{ $keyword }}"
    {{ end }}
  ],
  "pointOfContact": "{{ .Params.Metadata.PointOfContact }}",
  "license": "{{ .Params.Metadata.License }}",
  "created": "{{ .Params.Metadata.Created }}",
  "updated": "{{ .Params.Metadata.Updated }}",
  "scope": "{{ .Params.Metadata.Scope }}",
  "version": "{{ .Params.Metadata.Version }}",
  "stylesheets": [
    {{ range $sh_index, $stylesheet := .Params.Metadata.Stylesheets }}
    {{ if $sh_index }},{{ end }}
    {
        "title": "{{ $stylesheet.Title }}",
        "version": "{{ $stylesheet.Version }}",
        "specification": "{{ $stylesheet.Specification }}",
        "native": {{ $stylesheet.Native }},
        "link": {
            "href": "{{ $baseUrl }}/styles/{{ $style }}__{{ lower $projection }}?f={{ $stylesheet.Link.Format }}",
            "rel": "stylesheet",
            "type": "{{ $stylesheet.Link.Type }}"
        }
    }
    {{ end }}
  ],
  "links": [
    {
        "href": "{{ $baseUrl }}/styles/{{ $style }}__{{ lower $projection }}/metadata",
        "rel": "self",
        "title": "Style Metadata for {{ $style }} ({{ $projection }})"
    }
    {{ if .Params.Metadata.Links }}, {{ end }}
    {{ range $l_index, $link := .Params.Metadata.Links }}
    {{ if $l_index }},{{ end }}
    {
        "href": "{{ $baseUrl }}/resources/{{ $link.AssetFilename }}",
        "rel": "{{ $link.Rel }}",
        {{ if $link.Type }}
        "type": "{{ $link.Type }}"{{ if $link.Title }},{{ end }}
        {{ end }}
        {{ if $link.Title }}
        "title": "{{ $link.Title }}"
        {{ end }}
    }
    {{end}}
  ]
  {{end}}
}
