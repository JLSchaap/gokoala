{{- /*gotype: github.com/PDOK/gokoala/engine.TemplateData*/ -}}
{
  {{ $baseUrl := .Config.BaseURL }}
  "links" : [
    {
      "rel" : "self",
      "type" : "application/json",
      "title" : "This document",
      "href" : "{{ $baseUrl }}/collections?f=json"
    },
    {
      "rel" : "alternate",
      "type" : "text/html",
      "title" : "This document",
      "href" : "{{ $baseUrl }}/collections?f=html"
    }
  ],
  "collections" : [
    {{ if and .Config.OgcAPI.GeoVolumes .Config.OgcAPI.GeoVolumes.Collections }}
    {{ range $index, $type := .Config.OgcAPI.GeoVolumes.Collections }}
    {{ if $index }},{{ end }}
    {
      "id" : "{{ $type.ID }}",
      "title" : "{{ $type.ID }}",
      {{ if and $type.Metadata $type.Metadata.Description }}
      "description" : "{{ unmarkdown $type.Metadata.Description }}",
      {{ end }}
      "collectionType" : "3d-container"
      {{ if and $type.Metadata $type.Metadata.Extent }}
      ,
      "extent" : {
        "spatial": {
          "bbox": [ [ {{ $type.Metadata.Extent.Bbox | join "," }} ] ],
          "crs" : "http://www.opengis.net/def/crs/EPSG/0/{{ trimPrefix "EPSG:" $type.Metadata.Extent.Srs.EPSG }}"
        }
      }
      {{ end }}
      ,
      "links" : [
        {
          "rel" : "self",
          "type" : "application/json",
          "title" : "Information about the 3D {{ $type.ID }} collection as JSON",
          "href" : "{{ $baseUrl }}/collections/{{ $type.ID }}?f=json"
        },
        {
          "rel" : "alternate",
          "type" : "text/html",
          "title" : "Information about the 3D {{ $type.ID }} collection as HTML",
          "href" : "{{ $baseUrl }}/collections/{{ $type.ID }}?f=json"
        },
        {
          "rel" : "items",
          "type" : "application/json+3dtiles",
          "title" : "Tileset definition of collection {{ $type.ID }} according to the OGC 3D Tiles specification",
          "href" : "{{ $baseUrl }}/collections/{{ $type.ID }}/3dtiles?f=json"
        }
      ],
      "content" : [
        {
          "rel" : "original",
          "type" : "application/json+3dtiles",
          "title" : "Tileset definition of collection {{ $type.ID }} according to the OGC 3D Tiles specification",
          "href" : "{{ $baseUrl }}/collections/{{ $type.ID }}/3dtiles?f=json",
          "collectionType": "3d-container"
        }
      ]
    }{{ if $index }},{{ end }}
    {{end}}
    {{end}}

    {{/* start placeholder for tiles collections */}}
    {{ if and .Config.OgcAPI.Tiles .Config.OgcAPI.Tiles.Collections }}
    ,
    {{ range $index, $type := .Config.OgcAPI.Tiles.Collections }}
    {
      "id" : "{{ $type.ID }}",
      "title" : "{{ $type.ID }}"
      {{ if and $type.Metadata $type.Metadata.Description }}
      ,
      "description" : "{{ unmarkdown $type.Metadata.Description }}"
      {{ end }}
      {{ if and $type.Metadata $type.Metadata.Extent }}
      ,
      "extent" : {
        "spatial": {
          "bbox": [ [ {{ $type.Metadata.Extent.Bbox | join "," }} ] ],
          "crs" : "http://www.opengis.net/def/crs/EPSG/0/{{ trimPrefix "EPSG:" $type.Metadata.Extent.Srs.EPSG }}"
        }
      }
      {{ end }}
      ,
      "links" : [
        {
          "rel" : "self",
          "type" : "application/json",
          "title" : "This document",
          "href" : "{{ $baseUrl }}/collections/{{ $type.ID }}?f=json"
        }
      ]
    }{{ if $index }},{{ end }}
    {{ end }}
    {{ end }}
    {{/* end placeholder for tiles collections */}}

    {{/* start placeholder for features collections */}}
    {{ if and .Config.OgcAPI.Features .Config.OgcAPI.Features.Collections }}
    ,
    {{ range $index, $type := .Config.OgcAPI.Features.Collections }}
    {
      "id" : "{{ $type.ID }}",
      "title" : "{{ $type.ID }}"
      {{ if and $type.Metadata $type.Metadata.Description }}
      ,
      "description" : "{{ unmarkdown $type.Metadata.Description }}"
      {{ end }}
      {{ if and $type.Metadata $type.Metadata.Extent }}
      ,
      "extent" : {
        "spatial": {
          "bbox": [ [ {{ $type.Metadata.Extent.Bbox | join "," }} ] ],
          "crs" : "http://www.opengis.net/def/crs/EPSG/0/{{ trimPrefix "EPSG:" $type.Metadata.Extent.Srs.EPSG }}"
        }
      }
      {{ end }}
      ,
      "links" : [
        {
          "rel" : "self",
          "type" : "application/json",
          "title" : "This document",
          "href" : "{{ $baseUrl }}/collections/{{ $type.ID }}?f=json"
        }
      ]
    }{{ if $index }},{{ end }}
    {{ end }}
    {{ end }}
    {{/* end placeholder for features collections */}}

    {{/* start placeholder for maps collections */}}
    {{ if and .Config.OgcAPI.Maps .Config.OgcAPI.Maps.Collections }}
    ,
    {{ range $index, $type := .Config.OgcAPI.Maps.Collections }}
    {
      "id" : "{{ $type.ID }}",
      "title" : "{{ $type.ID }}"
      {{ if and $type.Metadata $type.Metadata.Description }}
      ,
      "description" : "{{ unmarkdown $type.Metadata.Description }}"
      {{ end }}
      {{ if and $type.Metadata $type.Metadata.Extent }}
      ,
      "extent" : {
        "spatial": {
          "bbox": [ [ {{ $type.Metadata.Extent.Bbox | join "," }} ] ],
          "crs" : "http://www.opengis.net/def/crs/EPSG/0/{{ trimPrefix "EPSG:" $type.Metadata.Extent.Srs.EPSG }}"
        }
      }
      {{ end }}
      ,
      "links" : [
        {
          "rel" : "self",
          "type" : "application/json",
          "title" : "This document",
          "href" : "{{ $baseUrl }}/collections/{{ $type.ID }}?f=json"
        }
      ]
    }{{ if $index }},{{ end }}
    {{ end }}
    {{ end }}
    {{/* end placeholder for maps collections */}}
  ]
}
